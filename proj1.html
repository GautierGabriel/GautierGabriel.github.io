<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet MOLONARI – Pipeline de Données</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; line-height: 1.7; color: #333; background: #fff; }
        
        /* Language Toggle */
        :lang(fr) .en { display: none !important; }
        :lang(en) .fr { display: none !important; }
        .lang-switch {
            position: fixed; top: 20px; right: 20px;
            background: white; color: #0F172A;
            padding: 8px 16px; border-radius: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            cursor: pointer; z-index: 1000; font-weight: bold;
            border: 2px solid #3B82F6;
        }

        /* Header Style - Tech & Data */
        .header { background: #0F172A; color: white; padding: 60px 20px; text-align: center; border-bottom: 4px solid #3B82F6; }
        .header h1 { margin: 0; font-size: 2.5rem; letter-spacing: -0.5px; font-weight: 800; }
        .back-btn { position: absolute; top: 20px; left: 20px; color: #94A3B8; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: color 0.2s; }
        .back-btn:hover { color: white; }
        .container { max-width: 950px; margin: 0 auto; padding: 40px 20px; }
        .subtitle { color: #60A5FA; font-weight: 600; margin-top: 10px; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 1px; }
        h2 { font-size: 1.8rem; border-left: 5px solid #3B82F6; padding-left: 15px; margin-top: 50px; color: #0F172A; }
        h3 { font-size: 1.3rem; margin-top: 30px; color: #334155; font-weight: 700; }
        .tech-stack { display: flex; gap: 10px; justify-content: center; margin-top: 25px; flex-wrap: wrap; }
        .tech { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .arch-diagram { background: white; border: 2px solid #E2E8F0; border-radius: 8px; padding: 30px; margin: 30px 0; display: flex; flex-direction: column; align-items: center; gap: 20px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); }
        .caption { font-size: 0.9rem; color: #64748B; margin-top: 10px; text-align: center; font-style: italic; }
        .file-ref { font-family: 'Consolas', monospace; background: #EEF2FF; color: #3B82F6; padding: 2px 6px; border-radius: 4px; font-size: 0.9rem; }
        .equation-box { background: #EFF6FF; border-left: 4px solid #3B82F6; padding: 20px; margin: 25px 0; border-radius: 0 8px 8px 0; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
        .metric-card { background: white; padding: 20px; border-radius: 8px; border: 1px solid #E2E8F0; text-align: center; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); }
        .metric-val { font-size: 1.8rem; font-weight: 800; color: #0F172A; }
        .metric-label { color: #64748B; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 5px; }
    </style>
    <script>
        function toggleLanguage() {
            const current = document.documentElement.getAttribute('lang') === 'fr' ? 'en' : 'fr';
            document.documentElement.setAttribute('lang', current);
            localStorage.setItem('portfolio_lang', current);
            document.getElementById('lang-btn-text').innerText = current === 'fr' ? 'EN' : 'FR';
        }
        document.addEventListener("DOMContentLoaded", () => {
            const lang = localStorage.getItem('portfolio_lang') || 'fr';
            document.documentElement.setAttribute('lang', lang);
            document.getElementById('lang-btn-text').innerText = lang === 'fr' ? 'EN' : 'FR';
        });
    </script>
</head>
<body>

    <button class="lang-switch" onclick="toggleLanguage()">
        <span id="lang-btn-text">EN</span>
    </button>

    <div class="header">
        <a href="index.html" class="back-btn">
            <span class="fr">&larr; Retour au Portfolio</span>
            <span class="en">&larr; Back to Portfolio</span>
        </a>
        <h1>MOLONARI Project</h1>
        <div class="subtitle">
            <span class="fr">Architecture SQL & Inversion Pseudo-2D</span>
            <span class="en">SQL Architecture & Pseudo-2D Inversion</span>
        </div>
        <div class="tech-stack">
            <span class="tech">Advanced SQL</span>
            <span class="tech">GitHub Collaboratif</span>
            <span class="tech">Python</span>
            <span class="tech">Bayesian Inference</span>
            <span class="tech">Pseudo-2D Modelling</span>
        </div>
    </div>

    <div class="container">

        <section>
            <h2>
                <span class="fr">Contexte et Objectifs</span>
                <span class="en">Context & Objectives</span>
            </h2>
            <p>
                <span class="fr">MOLONARI est un projet scientifique collaboratif (open-source sur GitHub) visant à quantifier précisément les échanges d'eau entre les rivières et les nappes phréatiques à l'aide de capteurs thermiques.</span>
                <span class="en">MOLONARI is a collaborative scientific project (open-source on GitHub) aimed at precisely quantifying water exchange between rivers and groundwater using thermal sensors.</span>
            </p>
            <p>
                <span class="fr"><strong>Mon rôle :</strong> Concevoir l'architecture de données complète pour transformer les signaux physiques bruts en indicateurs exploitables. J'ai développé le pipeline de réception des mesures, structuré leur stockage en base de données SQL, et implémenté les modèles mathématiques d'inversion.</span>
                <span class="en"><strong>My Role:</strong> Design the complete data architecture to transform raw physical signals into actionable indicators. I developed the measurement ingestion pipeline, structured SQL storage, and implemented mathematical inversion models.</span>
            </p>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-val">SQL</div>
                    <div class="metric-label">
                        <span class="fr">Architecture Relationnelle</span>
                        <span class="en">Relational Architecture</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-val">Python</div>
                    <div class="metric-label">
                        <span class="fr">Traitement Automatisé</span>
                        <span class="en">Automated Processing</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-val">MCMC</div>
                    <div class="metric-label">
                        <span class="fr">Inversion de Flux Latéraux</span>
                        <span class="en">Lateral Flux Inversion</span>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>
                <span class="fr">1. Architecture Data & Pipeline d'Ingestion</span>
                <span class="en">1. Data Architecture & Ingestion Pipeline</span>
            </h2>
            <p>
                <span class="fr">Le défi principal était de structurer des données brutes hétérogènes provenant de capteurs pour les rendre exploitables analytiquement. L'architecture repose sur un pipeline automatisé en Python qui alimente une base PostgreSQL normalisée.</span>
                <span class="en">The main challenge was structuring heterogeneous raw sensor data to make it analytically usable. The architecture relies on an automated Python pipeline feeding a normalized PostgreSQL database.</span>
            </p>

            <h3>
                <span class="fr">Structure de la Base de Données (Schema)</span>
                <span class="en">Database Structure (Schema)</span>
            </h3>
            <p>
                <span class="fr">La base est conçue pour garantir la fiabilité spatiale et temporelle des mesures. Chaque point de mesure est une entité unique, géolocalisée et typée, permettant des requêtes complexes sur des zones géographiques spécifiques.</span>
                <span class="en">The database is designed to ensure spatial and temporal reliability of measurements. Each sampling point is a unique, geolocated, and typed entity, enabling complex queries on specific geographic zones.</span>
            </p>

            <div class="arch-diagram">
                <img src="img5.png" alt="Diagramme de la base de données PostgreSQL pour MOLONARI" style="max-width: 100%; height: auto; border-radius: 6px;">
                <div class="caption">
                    <span class="fr"><strong>Figure 1 : Schéma Relationnel.</strong> La table centrale `SamplingPointManager` gère les métadonnées (coordonnées GPS, profondeur capteur) et lie chaque mesure brute à son contexte physique précis via des clés étrangères.</span>
                    <span class="en"><strong>Figure 1: Relational Schema.</strong> The central `SamplingPointManager` table manages metadata (GPS coordinates, sensor depth) and links each raw measurement to its precise physical context via foreign keys.</span>
                </div>
            </div>

            <h3>
                <span class="fr">Flux de Données : Du Capteur à la Base</span>
                <span class="en">Data Flow: Sensor to Database</span>
            </h3>
            <p>
                <span class="fr">Le traitement suit un processus rigoureux pour assurer la qualité de la donnée finale :</span>
                <span class="en">Processing follows a rigorous process to ensure final data quality:</span>
            </p>
            <ul>
                <li>
                    <span class="fr"><strong>Acquisition Temps Réel :</strong> Le script <span class="file-ref">adapt_nodered_mqtt.py</span> capture les flux de données transmis par les capteurs via le protocole MQTT.</span>
                    <span class="en"><strong>Real-Time Acquisition:</strong> The script <span class="file-ref">adapt_nodered_mqtt.py</span> captures data streams transmitted by sensors via the MQTT protocol.</span>
                </li>
                <li>
                    <span class="fr"><strong>Décodage & Conversion :</strong> Le module <span class="file-ref">decoder.py</span> transforme les données binaires/hexadécimales en valeurs physiques lisibles. Il valide le format des données avant toute tentative de stockage.</span>
                    <span class="en"><strong>Decoding & Conversion:</strong> The module <span class="file-ref">decoder.py</span> transforms binary/hex data into readable physical values. It validates data format before any storage attempt.</span>
                </li>
                <li>
                    <span class="fr"><strong>Écriture Sécurisée :</strong> L'insertion en base est pilotée par <span class="file-ref">db_insertion.py</span>. Ce module génère les requêtes SQL et gère les transactions : si une erreur survient pendant l'écriture, les modifications sont annulées pour préserver l'intégrité de la base. Il met également à jour les index temporels automatiquement.</span>
                    <span class="en"><strong>Secure Writing:</strong> Database insertion is driven by <span class="file-ref">db_insertion.py</span>. This module generates SQL queries and manages transactions: if an error occurs during writing, changes are rolled back to preserve database integrity. It also automatically updates time indexes.</span>
                </li>
            </ul>
        </section>

        <section>
            <h2>
                <span class="fr">2. Modélisation Scientifique : Inversion Pseudo-2D</span>
                <span class="en">2. Scientific Modeling: Pseudo-2D Inversion</span>
            </h2>
            <p>
                <span class="fr">Au-delà de la collecte, j'ai travaillé sur l'exploitation scientifique des données. L'approche classique unidimensionnelle (flux vertical pur) a déjà été implémentée auparavant, et nous avons essayé une nouvelle approche 2D pour capturer la complexité des échanges nappe-rivière.</span>
                <span class="en">Beyond collection, I worked on scientific data exploitation. The classic one-dimensional approach (pure vertical flow) had already been implemented; we attempted a new 2D approach to capture the complexity of groundwater-river exchanges.</span>
            </p>

            <h3>
                <span class="fr">Prise en compte des Flux Latéraux</span>
                <span class="en">Accounting for Lateral Fluxes</span>
            </h3>
            <p>
                <span class="fr">J'ai implémenté une extension du modèle physique pour passer à une approche <strong>Pseudo-2D</strong>. Cela permet d'intégrer les composantes horizontales de l'écoulement (flux latéraux), cruciales dans les zones de berges.</span>
                <span class="en">I implemented an extension of the physical model to move to a <strong>Pseudo-2D</strong> approach. This allows integrating horizontal flow components (lateral fluxes), which are crucial in riverbank zones.</span>
            </p>

            <div class="equation-box">
                <span class="fr"><strong>Équation de Chaleur avec Advection Latérale :</strong></span>
                <span class="en"><strong>Heat Equation with Lateral Advection:</strong></span>
                $$ \frac{\partial T}{\partial t} = \nabla \cdot (D_e \nabla T) - (\vec{v}_{vert} + \vec{v}_{lat}) \cdot \frac{C_w}{C} \nabla T $$
                <div style="font-size: 0.9rem; color: #64748B; margin-top: 10px;">
                    <span class="fr">L'ajout du terme vectoriel \( \vec{v}_{lat} \) permet au modèle MCMC d'ajuster non seulement la vitesse d'infiltration verticale, mais aussi les apports latéraux, réduisant considérablement les résidus de l'inversion.</span>
                    <span class="en">Adding the vector term \( \vec{v}_{lat} \) allows the MCMC model to fit not only the vertical infiltration rate but also lateral inputs, significantly reducing inversion residuals.</span>
                </div>
            </div>

            <p>
                <span class="fr">Cette implémentation spécifique est documentée dans le notebook <span class="file-ref">TEST_PSEUDO2D.ipynb</span>. Elle utilise des algorithmes MCMC (Markov Chain Monte Carlo) pour explorer l'espace des paramètres et fournir une distribution de probabilité pour chaque composante du flux, quantifiant ainsi l'incertitude de la mesure.</span>
                <span class="en">This specific implementation is documented in the notebook <span class="file-ref">TEST_PSEUDO2D.ipynb</span>. It uses MCMC (Markov Chain Monte Carlo) algorithms to explore parameter space and provide a probability distribution for each flux component, thus quantifying measurement uncertainty.</span>
            </p>
        </section>

        <section>
            <h2>
                <span class="fr">3. Qualité et Reproductibilité</span>
                <span class="en">3. Quality & Reproducibility</span>
            </h2>
            <p>
                <span class="fr">Le projet suit les standards de l'ingénierie logicielle : code modulaire, documentation exhaustive pour le déploiement du pipeline, et gestion de versions via GitHub. L'architecture a été pensée pour être "agnostique" du matériel, permettant l'ajout de nouveaux types de capteurs sans refonte du schéma SQL.</span>
                <span class="en">The project follows software engineering standards: modular code, exhaustive documentation for pipeline deployment, and version control via GitHub. The architecture was designed to be hardware-agnostic, allowing the addition of new sensor types without redesigning the SQL schema.</span>
            </p>
        </section>

    </div>

</body>
</html>